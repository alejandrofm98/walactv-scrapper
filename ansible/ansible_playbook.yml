---
- name: playbook
  hosts: "{{entorno}}"
  tasks:
    - name: Clonando repositorio git walactv-scrapper
      git:
        repo: "https://github.com/alejandrofm98/walactv-scrapper"
        dest: "/home/proyectos/walactv-scrapper"
        version: tvlibre
        force: yes
        update: yes

    - name: Copiando la carpeta resources
      ansible.builtin.copy:
        src: ~/PycharmProjects/walactv-scrapper/resources
        dest: /home/proyectos/walactv-scrapper


    - name: Run `docker-compose down`
      community.docker.docker_compose_v2:
        project_src: /home/proyectos/walactv-scrapper/docker
        state: absent
      register: output

    - name: Run `docker-compose up`
      community.docker.docker_compose_v2:
        project_src: /home/proyectos/walactv-scrapper/docker
        build: always
      register: output